(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[871],{5891:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/categorias",function(){return t(6830)}])},6830:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return y}});var a=t(5893),n=t(8752),r=t(6221),i=t(7837),l=t(1163),o=t(9008),d=t.n(o),c=t(7294),u=t(8974),g=t(649),x=t(8506),m=t(7161),f=t(5945),h=t(7536),p=t(9302),j=t(9310),b=t(553),w=t(9211),v=t(5447);function N(e){let{editId:s,onClose:t}=e,n=(0,f.NL)(),r=(0,l.useRouter)(),o=(0,j.a)(),d=new p.Z(o,r),[u,g]=(0,c.useState)(!1),{isFetching:m,data:N}=(0,i.a)(["tags",s],()=>d.get("/tags/details/".concat(s)),{staleTime:0,keepPreviousData:!0,refetchOnWindowFocus:!1,enabled:!!s}),{register:y,handleSubmit:k,reset:E,formState:{errors:C}}=(0,h.cI)({defaultValues:{}}),_=async e=>{if(!e.name)return(0,b.Eo)("El nombre es requerido");g(!0);let a=await d.post(s?"/tags/update":"/tags/create",{tagId:s,...e});if(!a.success)return g(!1),(0,b.Eo)(a.message);(0,b.XA)(s?"Categor\xeda editada correctamente!":"Categor\xeda creada correctamente!"),g(!1),t(),n.invalidateQueries(["tags"]),E()};return(0,c.useEffect)(()=>{N&&E(N.data)},[N,E]),(0,c.useEffect)(()=>{s||E({name:""})},[s,E]),(0,a.jsxs)("form",{className:"flex flex-col gap-4",children:[(0,a.jsx)("h1",{className:"text-xl font-medium text-gray-900",children:s?"Editar categor\xeda":"Crear categor\xeda"}),m?(0,a.jsx)(x.Z,{color:v.P.PRIMARY}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(w.I,{label:"Nombre",type:"text",name:"name",rules:{required:!0},errors:C,register:y}),(0,a.jsx)("button",{type:"button",className:"group flex w-full items-center justify-center rounded-md border border-gray-200 bg-white py-2 px-4 text-sm font-semibold shadow-sm transition-all hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",disabled:u,onClick(){t(),E()},children:"Cancelar"}),(0,a.jsx)("button",{className:"group flex w-full items-center justify-center rounded-md border border-transparent bg-indigo-600 py-2 px-4 text-sm font-semibold text-white shadow-sm transition-all hover:bg-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",disabled:u,onClick:k(_),children:u?(0,a.jsx)(x.Z,{}):s?"Editar categor\xeda":"Agregar categor\xeda"})]})]})}function y(){var e,s;let t=(0,l.useRouter)(),o=(0,j.a)(),f=new p.Z(o,t),[h,b]=(0,c.useState)(!1),[w,y]=(0,c.useState)(),{isFetching:k,data:E}=(0,i.a)(["tags"],()=>f.get("/tags/list"),{keepPreviousData:!0,staleTime:1e4});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d(),{children:(0,a.jsx)("title",{children:"Categor\xedas"})}),(0,a.jsx)(g.Z,{onButtonClick(){y(void 0),b(!0)}}),(0,a.jsxs)("div",{className:"flex flex-1 items-stretch overflow-hidden",children:[(0,a.jsx)("main",{className:"flex-1 overflow-y-auto",children:(0,a.jsxs)("div",{className:"mx-auto max-w-7xl px-4 pt-8 sm:px-6 lg:px-8",children:[(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("h1",{className:"flex-1 text-2xl font-bold text-gray-900",children:"Categor\xedas"}),(0,a.jsxs)("div",{className:"ml-6 flex items-center rounded-lg bg-gray-100 p-0.5 sm:hidden",children:[(0,a.jsxs)("button",{type:"button",className:"rounded-md p-1.5 text-gray-400 hover:bg-white hover:shadow-sm focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-500",children:[(0,a.jsx)(n.Z,{className:"h-5 w-5","aria-hidden":"true"}),(0,a.jsx)("span",{className:"sr-only",children:"Use list view"})]}),(0,a.jsxs)("button",{type:"button",className:"ml-0.5 rounded-md bg-white p-1.5 text-gray-400 shadow-sm focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-500",children:[(0,a.jsx)(r.Z,{className:"h-5 w-5","aria-hidden":"true"}),(0,a.jsx)("span",{className:"sr-only",children:"Use grid view"})]})]})]}),(0,a.jsxs)("section",{className:"mt-8 pb-16","aria-labelledby":"gallery-heading",children:[(0,a.jsx)("h2",{id:"gallery-heading",className:"sr-only",children:"Productos"}),k&&(0,a.jsx)("div",{className:"flex justify-center p-4",children:(0,a.jsx)(x.Z,{color:v.P.PRIMARY})}),!k&&(null==E?void 0:null===(e=E.data)||void 0===e?void 0:e.length)===0&&(0,a.jsx)("p",{className:"mt-4",children:"No se encontraron resultados"}),(0,a.jsx)("ul",{role:"list",className:"grid grid-cols-2 gap-x-4 gap-y-8 sm:grid-cols-3 sm:gap-x-6 md:grid-cols-4 lg:grid-cols-3 xl:grid-cols-4 xl:gap-x-8",children:null==E?void 0:null===(s=E.data)||void 0===s?void 0:s.map(e=>(0,a.jsxs)("li",{className:"relative",children:[(0,a.jsx)("div",{className:"h-4 w-full bg-indigo-500 rounded"}),(0,a.jsx)("p",{className:"pointer-events-none mt-2 block truncate text-sm font-medium text-gray-900",children:e.name}),(0,a.jsx)("div",{className:"flex gap-2 justify-end",children:(0,a.jsx)("button",{className:"bg-indigo-500 transition-all duration-300 hover:bg-indigo-700 rounded-lg p-2",onClick(){y(e._id),b(!0)},children:(0,a.jsx)(u.Z,{className:"h-5 w-5 text-white"})})})]},e._id))})]})]})}),(0,a.jsx)(m.Z,{open:h,setOpen:b,children:h?(0,a.jsx)(N,{editId:w,onClose(){y(void 0),b(!1)}}):null})]})]})}},8974:function(e,s,t){"use strict";var a=t(7294);let n=a.forwardRef(function({title:e,titleId:s,...t},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":s},t),e?a.createElement("title",{id:s},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"}))});s.Z=n}},function(e){e.O(0,[281,426,609,774,888,179],function(){return e(e.s=5891)}),_N_E=e.O()}]);